<div class="container user-mgmt">
  <div class="table-wrapper">
    <div class="table-title">
      <div class="row">
        <div class="col-xs-6">
          <h2>Gestão de <b>Utilizadores</b></h2>
        </div>
        <div class="col-xs-6 text-right">
          <button class="btn btn-primary" type="button">
            <i class="material-icons">&#xE147;</i>
            <span>Adicionar Utilizador</span>
          </button>
        </div>
      </div>
    </div>

    <div class="mb-15" style="margin-bottom: 15px; display: flex; gap: 10px">
      <input
        class="form-control"
        style="max-width: 300px"
        [(ngModel)]="filter"
        (keyup.enter)="applyFilter()"
        placeholder="Filtrar por nome ou email"
      />
      <button class="btn btn-default" (click)="applyFilter()">Filtrar</button>
    </div>

    <div *ngIf="loading">A carregar...</div>
    <div class="text-danger" *ngIf="error">{{ error }}</div>

    <table
      class="table table-striped table-hover"
      *ngIf="!loading && users.length"
    >
      <thead>
        <tr>
          <th (click)="changeSort('Id')" style="cursor: pointer">
            #
            <i
              *ngIf="sortBy === 'Id'"
              class="material-icons"
              style="font-size: 16px"
            >
              {{ sortOrder === "asc" ? "arrow_upward" : "arrow_downward" }}
            </i>
          </th>
          <th (click)="changeSort('Name')" style="cursor: pointer">
            Nome
            <i
              *ngIf="sortBy === 'Name'"
              class="material-icons"
              style="font-size: 16px"
            >
              {{ sortOrder === "asc" ? "arrow_upward" : "arrow_downward" }}
            </i>
          </th>
          <th (click)="changeSort('Email')" style="cursor: pointer">
            Email
            <i
              *ngIf="sortBy === 'Email'"
              class="material-icons"
              style="font-size: 16px"
            >
              {{ sortOrder === "asc" ? "arrow_upward" : "arrow_downward" }}
            </i>
          </th>
          <th (click)="changeSort('Profile')" style="cursor: pointer">
            Perfil
            <i
              *ngIf="sortBy === 'Profile'"
              class="material-icons"
              style="font-size: 16px"
            >
              {{ sortOrder === "asc" ? "arrow_upward" : "arrow_downward" }}
            </i>
          </th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of users">
          <td>{{ u.id }}</td>
          <td>{{ u.name }}</td>
          <td>{{ u.email }}</td>
          <td>{{ u.profile }}</td>
          <td>
            <a class="settings" title="Editar">
              <i class="material-icons">&#xE8B8;</i>
            </a>
            <a class="delete" title="Remover">
              <i class="material-icons">&#xE5C9;</i>
            </a>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="!loading && !users.length">Sem resultados.</div>

    <div class="clearfix" *ngIf="!loading && users.length">
      <div class="hint-text">
        Mostrando <b>{{ users.length }}</b> registos (Página {{ pageNumber }})
      </div>
      <ul class="pagination">
        <li class="page-item" [class.disabled]="pageNumber === 1">
          <a (click)="prevPage()" style="cursor: pointer">Anterior</a>
        </li>
        <li class="page-item">
          <a style="cursor: default">{{ pageNumber }}</a>
        </li>
        <li class="page-item">
          <a (click)="nextPage()" style="cursor: pointer">Seguinte</a>
        </li>
      </ul>
    </div>
  </div>
</div>
