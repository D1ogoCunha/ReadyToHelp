<!-- Main container (from your template) -->
<div class="container mt-4 mb-4">
  <!-- 1. Loading State -->
  @if (isLoading()) {
  <div class="text-center p-5">
    <div class="spinner-border text-primary" role="status">
      <span class="sr-only">Loading...</span>
    </div>
    <h2 class="mt-3">Loading details...</h2>
  </div>
  }

  <!-- Data Loaded State -->
  @if (occurrence(); as occ) {
  <!-- The Bootstrap Card -->
    <div class="card shadow-lg">
      <div class="card-body">
        <!-- Top Row -->
        <h3 class="card-title occ-title">{{ occ.title }}</h3>
        <!-- REMOVIDO: subtítulo do tipo -->
        <div class="row">
          <!-- Left Column (Image) -->
          <div class="col-lg-5 col-md-5 col-sm-6">
            <div class="border rounded bg-light">
              <svg
                class="bd-placeholder-img img-fluid d-block w-100"
                width="100%"
                height="400"
                xmlns="http://www.w3.org/2000/svg"
                role="img"
                aria-label="Sem imagem disponível"
                preserveAspectRatio="xMidYMid slice"
                focusable="false">
                <title>Sem imagem disponível</title>
                <rect width="100%" height="100%" fill="#e9ecef"></rect>
                <text x="50%" y="50%" fill="#adb5bd" dy=".3em" text-anchor="middle" font-size="24">
                  Sem imagem
                </text>
              </svg>
            </div>
          </div>
  
          <!-- Right Column (Info) -->
          <div class="col-lg-7 col-md-7 col-sm-6">
            <h4 class="box-title mt-3 mt-lg-0">Descrição</h4>
            <p class="text-secondary" style="white-space: pre-wrap">
              {{ occ.description || "No description provided." }}
            </p>
          </div>
  
          <!-- Bottom Row (General Info) -->
          <div class="col-lg-12 col-md-12 col-sm-12">
            <h3 class="box-title mt-5">General Info</h3>
            <div class="table-responsive">
              <table class="table table-striped table-product">
                <tbody>
                  <!-- NOVO: Type -->
                  <tr>
                    <td>Type</td>
                    <td>{{ formatEnum(occ.type) }}</td>
                  </tr>
                  <tr>
                    <td>Status</td>
                    <td>
                      @if (occ.status === 'ACTIVE') {
                        <span class="font-weight-bold text-success">{{ formatEnum(occ.status) }}</span>
                      } @else if (occ.status === 'CLOSED') {
                        <span class="font-weight-bold text-danger">{{ formatEnum(occ.status) }}</span>
                      } @else {
                        <span class="font-weight-bold text-warning">{{ formatEnum(occ.status) }}</span>
                      }
                    </td>
                  </tr>
                  <tr>
                    <td>Priority</td>
                    <td>
                      @if (occ.priority === 'HIGH') {
                        <span class="font-weight-bold text-danger">{{ formatEnum(occ.priority) }}</span>
                      } @else if (occ.priority === 'MEDIUM') {
                        <span class="font-weight-bold text-warning">{{ formatEnum(occ.priority) }}</span>
                      } @else {
                        <span class="font-weight-bold text-secondary">{{ formatEnum(occ.priority) }}</span>
                      }
                    </td>
                  </tr>
                  <tr>
                    <td>Reported On</td>
                    <td>{{ formatDate(occ.creationDateTime) }}</td>
                  </tr>
                  <tr>
                    <td>Concluded On</td>
                    <td>{{ formatDate(occ.endDateTime) }}</td>
                  </tr>
                  <tr>
                    <td>Coordinates</td>
                    <td>Lat: {{ occ.latitude }}, Lng: {{ occ.longitude }}</td>
                  </tr>
                  <tr>
                    <td>Report Count</td>
                    <td>{{ occ.reportCount }}</td>
                  </tr>
                  <tr>
                    <td>Responsible Entity ID</td>
                    <td>{{ occ.responsibleEntityId || "N/A" }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  } @else if (!isLoading()) {
  <!-- 3. Error State -->
  <div class="alert alert-danger" role="alert">
    <h4 class="alert-heading">Error</h4>
    <p>Could not load occurrence details.</p>
  </div>
  }
</div>
